{"version":3,"sources":["filtro.js"],"names":["tareasObj","mostrarFormulario","modal","document","createElement","classList","add","innerHTML","window","location","href","split","setTimeout","querySelector","addEventListener","reload","nuevaTarea","appendChild","tarea","value","trim","async","datos","FormData","append","textContent","respuesta","fetch","method","body","resultado","json","mostrarAlerta","forEach","element","id","nombre","newTarea","String","estado","id_proyecto","mostrarTareas","remove","error","console","agregarTarea","mensaje","tipo","referencia","alertaPrevia","alerta","obtenerTareas","tareas","padre","lastElementChild","contains","div","length","p","noTareas","checked","crearTarea","estilo","texto","divSeparador","editarTarea","divBotones","section","btnEstado","cambiarEstado","sectionEliminar","btnEliminar","mostrarEliminar","e","Swal","fire","title","showDenyButton","confirmButtonText","denyButtonText","then","result","isConfirmed","btn","srcElement","contador","posicion","splice","eliminarTarea","isDenied","toElement","inputId","setAttribute","botonEstado","setEstado","todas","completadas","pendientes","mostrarFiltros"],"mappings":"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","file":"filtro.js","sourcesContent":["(function() {\r\n    let tareasObj = [];\r\n    const boton = document.querySelector(\"#agregar-tarea\")\r\n    boton.addEventListener(\"click\", mostrarFormulario);\r\n    mostrarFiltros();\r\n    obtenerTareas();\r\n    \r\n    function mostrarFormulario() {\r\n        const modal = document.createElement(\"DIV\");\r\n        modal.classList.add(\"modal\");\r\n        modal.innerHTML = `\r\n            <section class=\"formulario-tarea\">\r\n                <form class=\"contenedor-sm formulario\">\r\n                    <div class=\"center\" id=\"leyenda\">\r\n                        <legend class=\"nueva-tarea\">Añade una nueva tarea</legend>\r\n                    </div>\r\n                    <div class=\"campo\">\r\n                        <label for=\"nombre\">Tarea:</label>\r\n                        <input type=\"text\" id=\"nombre\" name=\"nombre\" placeholder=\"Tarea de Tu Proyecto\">\r\n                    </div>\r\n                    <div class=\"botones-modal\">\r\n                        <section>\r\n                            <input type=\"hidden\" value=\"${window.location.href.split(\"=\")[1]}\" name=\"url\">\r\n                            <button type=\"button\" class=\"btn-indigo\" id=\"btn-crear\">Añadir Tarea</button>\r\n                        </section>\r\n                        <section>\r\n                            <button type=\"button\" class=\"btn-naranja\" id=\"btn-cancelar\">Cancelar</button>\r\n                        </section>\r\n                    </div>\r\n                </form>\r\n            </section>\r\n        `;\r\n        setTimeout(() => {\r\n            const formulario = document.querySelector(\".formulario-tarea\")\r\n            formulario.classList.add(\"animar\");\r\n            const botonCancelar = document.querySelector(\"#btn-cancelar\");\r\n            botonCancelar.addEventListener(\"click\", () => {\r\n                window.location.reload();\r\n            });\r\n            const botonCrear = document.querySelector(\"#btn-crear\");\r\n            botonCrear.addEventListener(\"click\", nuevaTarea);\r\n        }, 400);\r\n        document.querySelector(\".dashboard\").appendChild(modal);\r\n    }\r\n    \r\n    function nuevaTarea() {\r\n        const tarea = document.querySelector(\"#nombre\").value.trim();\r\n        if(tarea == \"\") {\r\n            mostrarAlerta(\"Nombre Vacio\", \"error\", document.querySelector(\"#leyenda\"));\r\n            return;\r\n        } else {\r\n            agregarTarea(tarea);\r\n        }\r\n    }\r\n    \r\n    function mostrarAlerta(mensaje, tipo, referencia) {\r\n        const alertaPrevia = document.querySelector(\".alerta\");\r\n        if(alertaPrevia) {\r\n            alertaPrevia.remove();\r\n        }\r\n        const alerta = document.createElement(\"DIV\");\r\n        alerta.classList.add(\"alerta\", tipo);\r\n        alerta.textContent = mensaje;\r\n        referencia.appendChild(alerta);\r\n        setTimeout(() => {\r\n            alerta.remove();\r\n        }, 5000);\r\n    }\r\n    \r\n    async function agregarTarea(tarea) {\r\n        const datos = new FormData();\r\n        datos.append(\"nombre\", tarea);\r\n        datos.append(\"url\", window.location.href.split(\"=\")[1]);\r\n        if(document.querySelector(\"#btn-crear\").textContent == \"Actualizar\") {\r\n            datos.append(\"id\", document.querySelector(\"#tareaEditar\").value);\r\n        }\r\n        //datos.append(\"url\", \"12345\");\r\n        try {\r\n            const respuesta = await fetch(\"http://localhost:3000/api/tarea\", {\r\n                method: \"POST\",\r\n                body: datos\r\n            });\r\n            const resultado = await respuesta.json();\r\n            mostrarAlerta(resultado[\"mensaje\"], resultado[\"tipo\"], document.querySelector(\"#leyenda\"));\r\n            if(resultado[\"tipo\"] == \"correcto\") {\r\n                if(document.querySelector(\"#btn-crear\").textContent == \"Actualizar\") {\r\n                    tareasObj.forEach(element => {\r\n                        if(element.id == resultado[\"id\"]) {\r\n                            element.nombre = tarea;\r\n                        }\r\n                    })\r\n                } else {\r\n                    const newTarea = {\r\n                        id: String(resultado.id),\r\n                        nombre: tarea,\r\n                        estado: \"0\",\r\n                        id_proyecto: resultado.id_proyecto\r\n                    };\r\n                    tareasObj = [...tareasObj, newTarea];\r\n                }\r\n                mostrarTareas();\r\n                setTimeout(() => {\r\n                    document.querySelector(\".modal\").remove();\r\n                }, 3000);\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n    \r\n    function mostrarFiltros() {\r\n        const todas = document.querySelector(\"#todas\");\r\n        const completadas = document.querySelector(\"#completadas\");\r\n        const pendientes = document.querySelector(\"#pendientes\");\r\n        todas.addEventListener(\"click\", () => {\r\n            obtenerTareas();\r\n        });\r\n        completadas.addEventListener(\"click\", () => {\r\n            obtenerTareas();\r\n        });\r\n        pendientes.addEventListener(\"click\", () => {\r\n            obtenerTareas();\r\n        });\r\n    }\r\n\r\n    async function obtenerTareas() {\r\n        try {\r\n            const datos = new FormData();\r\n        datos.append(\"url\", window.location.href.split(\"=\")[1])\r\n        const resultado = await fetch(\"http://localhost:3000/api/todas\", {\r\n            \"method\": \"POST\",\r\n            \"body\": datos\r\n        });\r\n        const tareas = await resultado.json();\r\n        tareasObj = tareas.tareas;\r\n        mostrarTareas();\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n    \r\n    function mostrarTareas() {\r\n        const padre = document.querySelector(\"#padre\");\r\n        if(padre.lastElementChild.classList.contains(\"mostrar\")) {\r\n            document.querySelector(\".mostrar\").remove();\r\n        }\r\n        const div = document.createElement(\"DIV\");\r\n        div.classList.add(\"mostrar\");\r\n        div.classList.add(\"contenedor-sm\");\r\n        padre.appendChild(div);\r\n        noTareas(tareasObj, div);\r\n        tareasObj.forEach(element => {\r\n            if(document.querySelector(\"#completadas\").checked) {\r\n                if(element.estado == 1) {\r\n                    crearTarea(element, div);\r\n                }\r\n            } else if(document.querySelector(\"#pendientes\").checked) {\r\n                if(element.estado == 0) {\r\n                    crearTarea(element, div);\r\n                }\r\n            } else {\r\n                crearTarea(element, div);\r\n            }\r\n        });\r\n    }\r\n    \r\n    function crearTarea(element, div) {\r\n        const estilo = element.estado == 0 ? \"naranja\" : \"verde\";\r\n        const texto = element.estado == 0 ? \"Pendiente\" : \"Completada\";\r\n        const divSeparador = document.createElement(\"DIV\");\r\n        divSeparador.classList.add(\"mostrar-campo\");\r\n\r\n        const p = document.createElement(\"P\");\r\n        p.textContent = element.nombre;\r\n        p.value = element.id;\r\n        p.id = `p-${element.id}`;\r\n        p.addEventListener(\"dblclick\", editarTarea);\r\n        divSeparador.appendChild(p);\r\n\r\n        const divBotones = document.createElement(\"DIV\");\r\n        divBotones.classList.add(\"mostrar-campo-botones\");\r\n\r\n        const section = document.createElement(\"SECTION\");\r\n\r\n        const btnEstado = document.createElement(\"BUTTON\");\r\n        btnEstado.textContent = texto;\r\n        btnEstado.classList.add(`btn-${estilo}`);\r\n        btnEstado.value = element.id;\r\n        btnEstado.id = `btn-estado-${element.id}`;\r\n        section.appendChild(btnEstado);\r\n        btnEstado.addEventListener(\"dblclick\", cambiarEstado);\r\n        \r\n        divBotones.appendChild(section);\r\n\r\n        const sectionEliminar = document.createElement(\"SECTION\");\r\n\r\n        const btnEliminar = document.createElement(\"BUTTON\");\r\n        btnEliminar.textContent = \"Eliminar\";\r\n        btnEliminar.classList.add(`btn-rojo`);\r\n        btnEliminar.id = `btn-eliminar-${element.id}`;\r\n        btnEliminar.value = element.id;\r\n        \r\n        sectionEliminar.appendChild(btnEliminar);\r\n        btnEliminar.addEventListener(\"click\", mostrarEliminar);\r\n\r\n        divBotones.appendChild(sectionEliminar);\r\n\r\n        divSeparador.appendChild(divBotones);\r\n\r\n        div.appendChild(divSeparador);\r\n    }\r\n\r\n    function mostrarEliminar(e) {\r\n        Swal.fire({\r\n            title: 'Estas seguro de eliminar la tarea?',\r\n            showDenyButton: true,\r\n            confirmButtonText: 'Si',\r\n            denyButtonText: `No`,\r\n          }).then((result) => {\r\n            /* Read more about isConfirmed, isDenied below */\r\n            if (result.isConfirmed) {\r\n              Swal.fire('Tarea eliminada!', '', 'success')\r\n              eliminarTarea(e);\r\n            } else if (result.isDenied) {\r\n              \r\n            }\r\n          })\r\n    }\r\n\r\n    async function eliminarTarea(e) {\r\n        const btn = document.querySelector(`#${e.srcElement.id}`);\r\n        const datos = new FormData();\r\n        datos.append(\"id\", btn.value);\r\n        const respuesta = await fetch(\"http://localhost:3000/api/eliminar\", {\r\n            \"method\": \"POST\",\r\n            \"body\": datos\r\n        });\r\n        const resultado = respuesta.json();\r\n        let contador = 0;\r\n        let posicion = 0;\r\n        tareasObj.forEach(element => {\r\n            contador++;\r\n            if(element.id == resultado.id) {\r\n                posicion = contador;\r\n            }\r\n        })\r\n        tareasObj.splice(posicion, 1);\r\n        obtenerTareas()\r\n    }\r\n    \r\n    function editarTarea(e) {\r\n        const p = document.querySelector(`#p-${e.toElement.value}`);\r\n        mostrarFormulario();\r\n        const legend = document.querySelector(\".nueva-tarea\");\r\n        legend.textContent = \"Actualizar Tarea\";\r\n        const btn = document.querySelector(\"#btn-crear\");\r\n        btn.textContent = \"Actualizar\"\r\n        const input = document.querySelector(\"#nombre\");\r\n        input.value = p.textContent;\r\n        const div = document.querySelector(\".botones-modal\");\r\n        const inputId = document.createElement(\"INPUT\");\r\n        inputId.setAttribute(\"type\", \"hidden\");\r\n        inputId.setAttribute(\"value\", e.toElement.value);\r\n        inputId.setAttribute(\"name\", \"id\");\r\n        inputId.setAttribute(\"id\", \"tareaEditar\");\r\n        div.appendChild(inputId);\r\n    }\r\n    \r\n    function cambiarEstado(e) {\r\n        const botonEstado = document.querySelector(`#btn-estado-${e.toElement.value}`);\r\n        if(botonEstado.classList.contains(\"btn-naranja\")) {\r\n            botonEstado.classList.remove(\"btn-naranja\");\r\n            botonEstado.classList.add(\"btn-verde\");\r\n            botonEstado.textContent = \"Completada\"\r\n            setEstado(0, e.toElement.value);\r\n        } else {\r\n            botonEstado.classList.add(\"btn-naranja\");\r\n            botonEstado.classList.remove(\"btn-verde\");\r\n            botonEstado.textContent = \"Pendiente\"\r\n            setEstado(1, e.toElement.value);\r\n        }\r\n    }\r\n    \r\n    async function setEstado(estado, id) {\r\n        const datos = new FormData();\r\n        datos.append(\"id\", id)\r\n        datos.append(\"estado\", estado)\r\n        const resultado = await fetch(\"http://localhost:3000/api/estados\", {\r\n            \"method\": \"POST\",\r\n            \"body\": datos\r\n        });\r\n        const respuesta = await resultado.json();\r\n        Swal.fire(\r\n            'Exito!!',\r\n            respuesta.mensaje,\r\n            respuesta.tipo\r\n          )\r\n        obtenerTareas();\r\n    }\r\n    \r\n    function noTareas(tareas, div) {\r\n        if(tareas.length == 0) {\r\n            const p = document.createElement(\"P\");\r\n            p.textContent = \"No Hay Tareas\";\r\n            p.classList.add(\"no-tareas\");\r\n            div.appendChild(p);\r\n        }\r\n    }\r\n})();"]}