!function(){let e=[];function t(){const e=document.createElement("DIV");e.classList.add("modal"),e.innerHTML=`\n            <section class="formulario-tarea">\n                <form class="contenedor-sm formulario">\n                    <div class="center" id="leyenda">\n                        <legend class="nueva-tarea">Añade una nueva tarea</legend>\n                    </div>\n                    <div class="campo">\n                        <label for="nombre">Tarea:</label>\n                        <input type="text" id="nombre" name="nombre" placeholder="Tarea de Tu Proyecto">\n                    </div>\n                    <div class="botones-modal">\n                        <section>\n                            <input type="hidden" value="${window.location.href.split("=")[1]}" name="url">\n                            <button type="button" class="btn-indigo" id="btn-crear">Añadir Tarea</button>\n                        </section>\n                        <section>\n                            <button type="button" class="btn-naranja" id="btn-cancelar">Cancelar</button>\n                        </section>\n                    </div>\n                </form>\n            </section>\n        `,setTimeout(()=>{document.querySelector(".formulario-tarea").classList.add("animar");document.querySelector("#btn-cancelar").addEventListener("click",()=>{window.location.reload()});document.querySelector("#btn-crear").addEventListener("click",n)},400),document.querySelector(".dashboard").appendChild(e)}function n(){const t=document.querySelector("#nombre").value.trim();""!=t?async function(t){const n=new FormData;n.append("nombre",t),n.append("url",window.location.href.split("=")[1]),"Actualizar"==document.querySelector("#btn-crear").textContent&&n.append("id",document.querySelector("#tareaEditar").value);try{const o=await fetch("http://localhost:3000/api/tarea",{method:"POST",body:n}),r=await o.json();if(a(r.mensaje,r.tipo,document.querySelector("#leyenda")),"correcto"==r.tipo){if("Actualizar"==document.querySelector("#btn-crear").textContent)e.forEach(e=>{e.id==r.id&&(e.nombre=t)});else{const n={id:String(r.id),nombre:t,estado:"0",id_proyecto:r.id_proyecto};e=[...e,n]}c(),setTimeout(()=>{document.querySelector(".modal").remove()},3e3)}}catch(e){console.error(e)}}(t):a("Nombre Vacio","error",document.querySelector("#leyenda"))}function a(e,t,n){const a=document.querySelector(".alerta");a&&a.remove();const o=document.createElement("DIV");o.classList.add("alerta",t),o.textContent=e,n.appendChild(o),setTimeout(()=>{o.remove()},5e3)}async function o(){try{const t=new FormData;t.append("url",window.location.href.split("=")[1]);const n=await fetch("http://localhost:3000/api/todas",{method:"POST",body:t}),a=await n.json();e=a.tareas,c()}catch(e){console.error(e)}}function c(){const t=document.querySelector("#padre");t.lastElementChild.classList.contains("mostrar")&&document.querySelector(".mostrar").remove();const n=document.createElement("DIV");n.classList.add("mostrar"),n.classList.add("contenedor-sm"),t.appendChild(n),function(e,t){if(0==e.length){const e=document.createElement("P");e.textContent="No Hay Tareas",e.classList.add("no-tareas"),t.appendChild(e)}}(e,n),e.forEach(e=>{document.querySelector("#completadas").checked?1==e.estado&&r(e,n):document.querySelector("#pendientes").checked?0==e.estado&&r(e,n):r(e,n)})}function r(e,t){const n=0==e.estado?"naranja":"verde",a=0==e.estado?"Pendiente":"Completada",o=document.createElement("DIV");o.classList.add("mostrar-campo");const c=document.createElement("P");c.textContent=e.nombre,c.value=e.id,c.id="p-"+e.id,c.addEventListener("dblclick",i),o.appendChild(c);const r=document.createElement("DIV");r.classList.add("mostrar-campo-botones");const s=document.createElement("SECTION"),u=document.createElement("BUTTON");u.textContent=a,u.classList.add("btn-"+n),u.value=e.id,u.id="btn-estado-"+e.id,s.appendChild(u),u.addEventListener("dblclick",l),r.appendChild(s);const m=document.createElement("SECTION"),p=document.createElement("BUTTON");p.textContent="Eliminar",p.classList.add("btn-rojo"),p.id="btn-eliminar-"+e.id,p.value=e.id,m.appendChild(p),p.addEventListener("click",d),r.appendChild(m),o.appendChild(r),t.appendChild(o)}function d(t){Swal.fire({title:"Estas seguro de eliminar la tarea?",showDenyButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(n=>{n.isConfirmed?(Swal.fire("Tarea eliminada!","","success"),async function(t){const n=document.querySelector("#"+t.srcElement.id),a=new FormData;a.append("id",n.value);const c=(await fetch("http://localhost:3000/api/eliminar",{method:"POST",body:a})).json();let r=0,d=0;e.forEach(e=>{r++,e.id==c.id&&(d=r)}),e.splice(d,1),o()}(t)):n.isDenied})}function i(e){const n=document.querySelector("#p-"+e.toElement.value);t();document.querySelector(".nueva-tarea").textContent="Actualizar Tarea";document.querySelector("#btn-crear").textContent="Actualizar";document.querySelector("#nombre").value=n.textContent;const a=document.querySelector(".botones-modal"),o=document.createElement("INPUT");o.setAttribute("type","hidden"),o.setAttribute("value",e.toElement.value),o.setAttribute("name","id"),o.setAttribute("id","tareaEditar"),a.appendChild(o)}function l(e){const t=document.querySelector("#btn-estado-"+e.toElement.value);t.classList.contains("btn-naranja")?(t.classList.remove("btn-naranja"),t.classList.add("btn-verde"),t.textContent="Completada",s(0,e.toElement.value)):(t.classList.add("btn-naranja"),t.classList.remove("btn-verde"),t.textContent="Pendiente",s(1,e.toElement.value))}async function s(e,t){const n=new FormData;n.append("id",t),n.append("estado",e);const a=await fetch("http://localhost:3000/api/estados",{method:"POST",body:n}),c=await a.json();Swal.fire("Exito!!",c.mensaje,c.tipo),o()}document.querySelector("#agregar-tarea").addEventListener("click",t),function(){const e=document.querySelector("#todas"),t=document.querySelector("#completadas"),n=document.querySelector("#pendientes");e.addEventListener("click",()=>{o()}),t.addEventListener("click",()=>{o()}),n.addEventListener("click",()=>{o()})}(),o()}();
//# sourceMappingURL=filtro.js.map
